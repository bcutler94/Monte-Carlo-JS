!function(t){var e={};function i(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){let a=i(1);document.addEventListener("DOMContentLoaded",t=>{let e=document.querySelector(".search-input"),i=document.querySelector(".search-ul"),r=document.querySelector(".reset-button");$(document).ready(()=>$.ajax({method:"GET",url:"https://cloud.iexapis.com/stable/ref-data/iex/symbols?token=pk_cf7af45bc1714be8ba5a7869e7acc84d"}).then(t=>{new a({input:e,ul:i,button:r,companies:t})}))})},function(t,e,i){let a=i(2),r=i(3),s=i(4);t.exports=class{constructor({input:t,ul:e,button:i,companies:a}){this.input=t,this.companies=a,this.ul=e,this.button=i;let r=$("html,body");this.input.addEventListener("input",t=>{t.preventDefault(),this.displayMatches(t.currentTarget.value)}),this.input.addEventListener("keyup",t=>{13===t.keyCode&&1===this.ul.children.length&&(t.preventDefault(),this.getStockData(this.ul.firstElementChild.dataset.ticker.toLowerCase()),r.animate({scrollTop:500},7e3,"linear"))}),this.ul.addEventListener("click",t=>{t.preventDefault(),this.fetchStockData(t),r.animate({scrollTop:500},7e3,"linear")}),this.button.addEventListener("click",t=>{t.preventDefault(),window.location.reload()})}getStockData(t){$.ajax({method:"GET",url:`https://cloud.iexapis.com/stable/stock/${t}/chart/1y?token=pk_cf7af45bc1714be8ba5a7869e7acc84d`}).then(e=>{this.ul.innerHTML="",this.input.value="",this.prices=e;let i=[],n=[],h=0;for(;i.length<=150;){let t=this.calculateSim(this.prices);i.push({idx:h,data:t}),n.push(t[t.length-1].price),h++}let o=this.prices.filter(t=>{if(void 0!==t.close)return t}),l=o[o.length-1].close,c=this.avgEndPrice(n),d=this.avgLine(this.prices,c);new a(i,d,c),new r(n,c),new s(n,c,t,l).render()})}avgLine(t,e){let i=t.filter(t=>{if(void 0!==t.close)return t}),a=i[i.length-1].close,r=(e-a)/i.length,s=[];for(let t=0;t<i.length;t++)s.push({date:t,price:a+=r});return s}avgEndPrice(t){let e=0;for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}getMatches(t){return this.companies.filter(e=>{let i=t.length;if(e.symbol.slice(0,i).toLowerCase()===t.toLowerCase())return e.symbol})}displayMatches(t){let e=this.getMatches(t).map(t=>`<li data-ticker=${t.symbol}>\n                <span class='company' data-ticker=${t.symbol}>${t.symbol}</span>\n            </li>`).join("");t.length>0?this.ul.innerHTML=e:this.ul.innerHTML=""}fetchStockData(t){let e=t.target.dataset.ticker.toLowerCase();e&&this.getStockData(e)}calculateSim(t){let e=t.filter(t=>{if(void 0!==t.close)return t}),i=this.calculateAvg(e),a=this.calculateStdDev(e,i),r=Math.pow(a,2),s=[{date:0,price:e[e.length-1].close}];for(let t=0;t<e.length;t++){let e=i-r/2-Math.pow(a,2)/2+a*this.calculateNoise(-3,3),n=s[t].price*Math.pow(Math.E,e);s.push({date:t+1,price:n})}return s}calculateAvg(t){let e=0,i=0;for(let a=0;a<t.length-1;a++)i+=a+1,e+=(t[a+1].close-t[a].close)*(a+1)/t[a].close;return e/i}calculateStdDev(t,e){let i=0,a=0;for(let r=0;r<t.length-1;r++){a+=r+1;let s=(t[r+1].close-t[r].close)/t[r].close;i+=Math.pow(s-e,2)*(r+1)}return Math.pow(i/a,.5)}calculateNoise(t,e){let i=0,a=0;for(;0===i;)i=Math.random();for(;0===a;)a=Math.random();let r=Math.sqrt(-2*Math.log(i))*Math.cos(2*Math.PI*a);return((r=r/10+.5)>1||r<0)&&(r=this.calculateNoise(t,e)),r*=e-t,r+=t}}},function(t,e){t.exports=class{constructor(t,e,i){this.data=Object.values(t).map(t=>t.data),this.margin={top:50,right:100,bottom:50,left:70},this.width=825-this.margin.left-this.margin.right,this.height=600-this.margin.top-this.margin.bottom,d3.selectAll(".linechart").remove(),this.svg=d3.select(".charts").append("svg").attr("class","linechart").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.x=d3.scaleLinear().range([0,this.width]).domain([0,this.data[0].length]),this.y=d3.scaleLinear().range([this.height,0]).domain([d3.min(this.data,t=>d3.min(t,t=>t.price)),d3.max(this.data,t=>d3.max(t,t=>t.price))]),this.svg.append("g").attr("id","x-axis").attr("transform",`translate(0, ${this.height})`).call(d3.axisBottom(this.x)),this.svg.append("g").attr("id","y-axis").attr("transform","translate(0, 0)").call(d3.axisLeft(this.y)),this.line=d3.line().x(t=>this.x(t.date)).y(t=>this.y(t.price)),this.lines=this.svg.selectAll(".lines").data(this.data).enter().append("g").attr("class",".lines"),this.lines.append("path").attr("class","line").style("fill","none").style("stroke-width","3").style("stoke-linecap","round").style("stroke",()=>this.randomColor()).attr("d",t=>(this.line(t),this.line(t))),this.lines.append("path").attr("class","line").style("fill","none").style("stroke-width","6").style("stoke-linecap","round").style("stroke","orange").attr("d",()=>(this.line(e),this.line(e))),this.svg.append("text").attr("class","projected").text("Projected").attr("fill","orange").attr("opacity",0).attr("x",this.width).attr("y",this.y(i)-10),this.svg.append("text").attr("class","projected").text("Path").attr("fill","orange").attr("opacity","0").attr("x",this.width).attr("y",this.y(i)+10),this.svg.append("text").text("Price ($)").attr("y",-30).attr("x",-this.height/2).attr("transform","rotate(-90)"),this.svg.append("text").text("Days from Today").attr("y",this.height+30).attr("x",this.width/2-50),this.svg.append("text").text("Future Stock Price Simulations").style("font-weight","900").attr("font-size","22px").attr("y",-30).attr("x",this.width/2-130),this.animateLine()}lineHelper(t){t.forEach(t=>`line-${t.date}`)}animateLine(){d3.selectAll(".line").style("opacity","1").style("font-weight","900");let t=4*d3.selectAll(".line").node().getTotalLength();d3.selectAll(".line").attr("stroke-dasharray",t+" "+t).attr("stroke-dashoffset",t).transition().delay((t,e)=>40*e).ease(d3.easeExp).duration(1e4).attr("stroke-dashoffset",0),d3.selectAll(".projected").transition().duration(7e3).attr("font-weight","900").attr("opacity","1")}randomColor(){return`rgb(${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())}, ${Math.floor(256*Math.random())})`}update(){}}},function(t,e){t.exports=class{constructor(t,e){this.data=t,this.margin={top:50,right:50,bottom:50,left:50},this.width=825-this.margin.left-this.margin.right,this.height=600-this.margin.top-this.margin.bottom,d3.selectAll(".barchart").remove(),this.svg=d3.select(".charts").append("svg").attr("class","barchart").attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom).append("g").attr("transform","translate("+this.margin.left+","+this.margin.top+")"),this.x=d3.scaleLinear().range([0,this.width]).domain([d3.min(this.data,t=>t)-5,d3.max(this.data,t=>t)+5]),this.hist=d3.histogram().domain(this.x.domain()).thresholds(this.x.ticks(20))(this.data),this.yMax=d3.max(this.hist,t=>t.length),this.y=d3.scaleLinear().range([this.height,0]).domain([0,d3.max(this.hist,t=>t.length)]),this.colorScale=d3.scaleLinear().domain([0,d3.max(this.hist,t=>t.length)]).range([d3.rgb("lightgreen").brighter(),d3.rgb("lightgreen").darker()]),this.svg.append("g").attr("id","x-axis").attr("transform",`translate(0, ${this.height})`).call(d3.axisBottom(this.x)),this.line=d3.line().x(e).y([0,this.yMax]),this.bar=this.svg.selectAll("bar").data(this.hist).enter().append("g").attr("class","bar").attr("transform",t=>`translate(${this.x(t.x0)}, ${this.y(t.length)})`),this.bar.append("rect").attr("height",0).attr("width",t=>this.x(t.x1)-this.x(t.x0)-1).attr("y",t=>this.height-this.y(t.length)).transition().duration(8e3).delay((t,e)=>80*e+6e3).ease(d3.easeBounce).attr("fill",t=>this.colorScale(t.length)).attr("opacity",1).attr("y",0).attr("width",t=>this.x(t.x1)-this.x(t.x0)-1).attr("height",t=>this.height-this.y(t.length)),this.line=d3.line().x(this.x(e)).y([0,this.yMax]),this.svg.append("g").selectAll("line").data([{y1:0,y2:this.height,x1:this.x(e),x2:this.x(e)}]).enter().append("line").attr("class","avgLine").attr("y1",this.height).attr("y2",t=>t.y2).attr("x1",t=>t.x1).attr("x2",t=>t.x2).attr("stroke","orange").attr("fill","none").attr("stroke-width","0").transition().delay((t,e)=>8e3*e+6e3).duration(8e3).attr("y1",t=>t.y1).attr("stroke-width","6");let i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2});this.svg.append("text").attr("stroke","none").attr("y",this.height).transition().duration(8e3).delay((t,e)=>8e3*e+6e3).attr("opacity","1").attr("fill","orange").attr("font-weight","900").attr("x",this.x(e)-70).attr("y",-5).text(`Projected Price ${i.format(e)}`),this.svg.append("g").attr("class","xaxis").attr("transform",`translate(0, ${this.height})`),this.svg.append("text").text("Price ($)").attr("y",this.height+30).attr("x",this.width/2),this.svg.append("text").text("Distribution of Projected Prices").style("font-weight","900").attr("font-size","22px").attr("y",-30).attr("x",this.width/2-130)}}},function(t,e){t.exports=class{constructor(t,e,i,a){this.endPrices=t,this.avgEndPrice=e,this.span=document.getElementById("stats"),this.header=document.getElementById("stats-header"),this.ticker=i,this.recentPrice=a,this.currency=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2})}downsideDev(){let t=this.endPrices.filter(t=>this.avgEndPrice>t),e=0;for(let i=0;i<t.length;i++)e+=Math.pow(this.avgEndPrice-t[i],2);return this.downDev=Math.pow(e/(t.length-1),.5),this.currency.format(this.downDev)}upsideDev(){let t=this.endPrices.filter(t=>this.avgEndPrice<t),e=0;for(let i=0;i<t.length;i++)e+=Math.pow(this.avgEndPrice-t[i],2);return this.upDev=Math.pow(e/(t.length-1),.5),this.currency.format(this.upDev)}percentChange(){let t=(this.avgEndPrice-this.recentPrice)/this.recentPrice*100;return t>=0?`${Math.abs(t.toFixed(2))}% gain`:`${Math.abs(t.toFixed(2))}% loss`}upPercent(){return`${(this.upDev/this.avgEndPrice*100).toFixed(2)}%`}downPercent(){return`${(this.downDev/this.avgEndPrice*100).toFixed(2)}%`}render(){this.header.innerHTML=`${this.ticker.toUpperCase()} Distribution Statistics`,this.span.innerHTML=`In 250 business days (approximately 1 calendar year), the projected\n        stock price for ${this.ticker.toUpperCase().bold()} is ${this.currency.format(this.avgEndPrice).bold()},\n        this represents a ${this.percentChange().bold()} from today's price of ${this.currency.format(this.recentPrice).bold()}.\n        The downside deviation, which denotes the volatility of simulations with end prices below the projected price,\n         is ${this.downsideDev().bold()} or ${this.downPercent().bold()}. The upside deviation,\n        which denotes the volatility of simulations with end prices below the projected price,\n        ${this.upsideDev().bold()} or ${this.upPercent().bold()}.`}}}]);